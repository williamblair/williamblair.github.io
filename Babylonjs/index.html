<!DOCTYPE html>
<html lang="en-US" ng-app="bjSite">

  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>Bootstrap Site</title>
	
	<!-- bootstrap -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	
	<!-- angular -->
	<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>

	<!-- defines the page navbar -->
  <script src="/javascript/NavbarDirective.js"></script>
  
  <!-- babylon.js includes -->
  <script src="https://cdn.babylonjs.com/babylon.js"></script>
  <script src="https://code.jquery.com/pep/0.4.1/pep.js"></script>

	<style>
	html {
	  position: relative;
	  min-height: 100%;
	}
	body {
	margin-bottom: 60px;
	background-color: #000000;
	}
	.footer {
	  /* Positioning */
      position: absolute;
      bottom: 0;
      width: 100%;
      /* Set the fixed height of the footer here */
      height: 60px;
      line-height: 60px; /* Vertically center the text there */
      
	  /* Look */
	  background-color: #000000;
    }
	
	#lastModified {
	  color: #AAAAAA;
	}
	
	.jumbotron {
	  padding:0px;
	  background-color:#000000;
	}
	
	#imageContainer {
	  margin-left: auto; 
	  margin-right: auto; 
	  width:75%; 
	  min-width:800px;
	}
  </style>

  <!-- ace editor -->
  <style>
      .codeDiv {
        height: 300px;
        margin: 10px;
      }
  </style>
  
  <!-- babylon.js canvas style -->
  <style>
    #mycanvas {
      width: 100%;
      height: 100%;
      touch-action: none;
    }
  </style>
	
  </head>

<body>

<!-- defined with NavbarDirective.html/.js -->
<site-nav></site-nav>

<div class="jumbotron">
  <div style="width:640px;height:480px;margin-left:auto;margin-right:auto;">
    <canvas id="mycanvas" width="100%" height="100%"></canvas>
    <script src="index.js"></script>
  </div>
</div>

<div class="container">
  <div class="row">
    <div class="col-xs-12">
      <div id="codeEditor" class="codeDiv">Test Text</div>
    </div>
  </div>
  <div class="row">
    <div class="col-xs-12">
      <button class="btn btn-primary" onclick="runCode()">Run</button>
    </div>
  </div>
</div>

<script src="/ace-builds/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
<script>
  /* New editor instance from the given id */
  var editor = ace.edit("codeEditor");
  editor.setTheme("ace/theme/monokai");
  editor.getSession().setMode("ace/mode/javascript");

  /* First definition of the button onclick before
   * the code is loaded */
  var runCode = function() {
    console.log('Sorry, text not loaded yet...');
  };

  jQuery.get("index.js", function(data, status){
    console.log('file contents:');
    console.log(data);

    editor.setValue(data);
    editor.resize();

    /* loading text selects it all for some reason */
    editor.getSession().selection.clearSelection();

    /* Set the new definition of the onrun function */
    runCode = function() {
      var codeEditorFunc = new Function(editor.getValue());
      codeEditorFunc();
    };
  });

</script>

<!-- footer content is filled in with footer.js, using its id -->
<footer class="footer" id="pageFooter">
<script src="/javascript/footer.js"></script>
</footer>

<!-- last modified will exist after footer.js enters the elements
     into pageFooter -->
<script>
  var p = document.getElementById('lastModified');
  var modString = "Last Modified: ";
  modString += document.lastModified;
  p.innerHTML = modString;
</script>

</body>
</html>