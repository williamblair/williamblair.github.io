<!DOCTYPE html>
<html lang="en" ng-app="mysite">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous">

    <!-- Bootstrap js -->
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/js/bootstrap.min.js" integrity="sha384-a5N7Y/aK3qNeh15eJKGWxsqtnX/wWdSZSKp+81YjTmS15nvnvxKHuzaWwXHDli+4" crossorigin="anonymous"></script>
    
    <!-- prism syntax hilighting -->
    <!-- css is modified version of prism-xonokai: https://github.com/PrismJS/prism-themes -->
    <link href="prism/bj_prism.css" rel="stylesheet"/>
    
    <!-- angular -->
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.4/angular.min.js"></script>
    
    <!-- directives (Header MUST go first - bootstraps the angular app) -->
    <script src="angular/HeaderDirective.js"></script>
    <script src="angular/FooterDirective.js"></script>
    <script src="angular/NavbarDirective.js"></script>
    
    <title>William Blair</title>

    <link type="text/css" rel="stylesheet" href="css/main.css"/>
    
     <style>
        #mycanvas {
            width: 500px;
            height: 500px;
            overflow: hidden;
        }
    </style>

    <!-- ace editor -->
    <style>
        .codeEditor {
            height: 300px;
            margin-top: 10px;
            margin-bottom: 10px;
        }
    </style>

  </head>
  <body>
    <div class="container">
        
        <!-- defined in angular/HeaderDirective.js -->
        <site-header></site-header>
        
        <!-- body -->
        <div class="row">
            
            <!-- defined in angular/NavbarDirective.js -->
            <div class="col-sm-3">
                <site-nav></site-nav>
            </div>
            
            <!-- main content -->
            <div id="contentcol" class="col-sm-9">
                
                <!-- canvas to draw on -->
                <div class="row">
                    <div class="col-sm-12">
                        <div style="width:500px; height:500px; margin-left: auto; margin-right: auto;">
                            <canvas id="mycanvas" width="500" height="500"></canvas>
                        </div>
                    </div>
                </div>
                
                <div class="row">
                    <div class="col-sm-12">
                        <!-- codemirror editor area -->
                        <div id="editorArea1" class="codeEditor"></div>
                    </div>
                    <div class="col-sm-12">
                        <button class="btn btn-primary" id="runButton">Run</button>
                    </div>
                    <!-- load ace editor -->
                    <script src="ace-builds/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>

                    <!-- jquery load text from javascript file, then initialize
                    the editor upon completion -->
                    <script>

                        $(function(){
                            $('#editorArea1').load('javascript/canvasPhysics.js', function(){

                                console.log('load performed!');

                                editor = ace.edit("editorArea1");
                                editor.setTheme("ace/theme/monokai");
                                editor.getSession().setMode("ace/mode/javascript");
                                document.getElementById("editorArea1").style.fontSize="14px";

                                /* set the function to run when the button is clicked */
                                var button = document.getElementById('runButton');
                                button.onclick = function() {
                                    var animate = new Function(editor.getValue());
                                    animate();
                                };

                                /* Run the function when the web page loads */
                                var initialFunc = new Function(editor.getValue());
                                initialFunc();
                            });
                        });
                    </script>
                </div> <!-- row -->
                
            </div> <!-- col-sm-9 -->
            
            <!-- defined in angular/FooterDirective.js-->
            <site-footer></site-footer>
            
        </div><!-- body -->
        
    </div> <!-- container -->
    
    </body>
</html>
